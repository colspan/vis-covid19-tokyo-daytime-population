!function(n){function t(t){for(var o,i,l=t[0],p=t[1],c=t[2],d=0,u=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(o in p)Object.prototype.hasOwnProperty.call(p,o)&&(n[o]=p[o]);for(s&&s(t);u.length;)u.shift()();return a.push.apply(a,c||[]),e()}function e(){for(var n,t=0;t<a.length;t++){for(var e=a[t],o=!0,l=1;l<e.length;l++){var p=e[l];0!==r[p]&&(o=!1)}o&&(a.splice(t--,1),n=i(i.s=e[0]))}return n}var o={},r={0:0},a=[];function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=o,i.d=function(n,t,e){i.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,t){if(1&t&&(n=i(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)i.d(e,o,function(t){return n[t]}.bind(null,o));return e},i.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(t,"a",t),t},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],p=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var s=p;a.push([22,1]),e()}({17:function(n,t,e){var o=e(18);"string"==typeof o&&(o=[[n.i,o,""]]);var r={hmr:!0,transform:void 0};e(3)(o,r);o.locals&&(n.exports=o.locals)},18:function(n,t,e){(n.exports=e(1)(!1)).push([n.i,".map-title {\n    background-color: rgba(96, 210, 255, 0.2);\n    border-color: rgb(98, 179, 255);\n    border-style: solid;\n    border-width: 1px;\n    padding: 2px 10px;\n    color: rgb(98, 179, 255);\n}\n\n.map-title h1 {\n    font-size: 48pt;\n    margin: 0;\n}\n\n.map-indicator {\n    background-color: rgba(96, 210, 255, 0.2);\n    border-color: rgb(98, 179, 255);\n    border-style: solid;\n    border-width: 1px;\n    padding: 2px 10px;\n    color: white;\n    padding: 2px 10px;\n    width: 500px;\n}\n\n.map-indicator .datetime {\n    font-size: 42pt;\n}\n\n.map-indicator .selector {\n    width: 100%;\n}\n\ninput[type=range] {\n    -webkit-appearance: none;\n    background: rgba(0, 0, 0, 0.7);\n    height: 24px;\n    width: 240px;\n    border-radius: 8px;\n}\n\ninput[type=range]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    background: rgb(98, 179, 255);\n    height: 20px;\n    width: 20px;\n    border-radius: 50%;\n}\n\ninput[type=range]::-ms-tooltip {\n    display: none;\n}\n\ninput[type=range]::-moz-range-track {\n    height: 0;\n}\n\ninput[type=range]::-moz-range-thumb {\n    background: rgb(98, 179, 255);\n    height: 20px;\n    width: 20px;\n    border: none;\n    border-radius: 50%;\n}\n\n.leaflet-tile-container img {\n    filter: invert(100%) hue-rotate(180deg);\n}",""])},22:function(n,t,e){"use strict";e.r(t);var o=e(4),r=e.n(o),a=e(0),i=e.n(a);e(9);delete i.a.Icon.Default.prototype._getIconUrl,i.a.Icon.Default.mergeOptions({iconRetinaUrl:e(15),iconUrl:e(2),shadowUrl:e(16)}),i.a.Control.Title=i.a.Control.extend({onAdd:function(n){const t=i.a.DomUtil.create("div");return t.className="map-title",t.innerHTML=`<h1>${this.options.title}</h1>`,t},onRemove:function(n){}}),i.a.control.title=function(n){return new i.a.Control.Title(n)},i.a.Control.EmptyDiv=i.a.Control.extend({onAdd:function(n){const t=i.a.DomUtil.create("div");return t.className=this.options.className,t},onRemove:function(n){}}),i.a.control.emptyDiv=function(n){return new i.a.Control.EmptyDiv(n)};var l=e(6);e(17);var p=e(5);const c=i.a.map("map",{zoom:12,center:[35.68,139.75],zoomControl:!1}),s=['Tiles <a href="https://maps.gsi.go.jp/development/ichiran.html">国土地理院</a>','Boundary Data <a href="https://github.com/niiyz/JapanCityGeoJson/">JapanCityGeoJson</a>','Polulation Log <a href="https://ds.yahoo.co.jp/topics/20200403.html">ヤフー・データソリューション</a>','Visualization &copy; <a href="https://github.com/colspan">@colspan</a>'].join(" | ");i.a.tileLayer("https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",{attribution:s}).addTo(c);i.a.control.title({title:"COVID-19 Tokyo Daytime Population Transition",position:"topleft"}).addTo(c);i.a.control.zoom({position:"bottomright"}).addTo(c),Promise.all([new Promise((n,t)=>{fetch("./tokyo23_topo.json").then(n=>n.json()).then(t=>{const e=l.a(t,t.objects.tokyo23);n(e)}).catch(t)}),new Promise((n,t)=>{fetch("./tokyo_population_log.json").then(n=>n.json()).then(n).catch(t)})]).then(n=>{const[t,e]=n,o=Object.keys(e),a=e[o[0]].value.date,l=(n,t)=>n>t?n:t,s=(n,t)=>n<t?n:t,d=o.map(n=>{const t=e[n];return[t.value["来訪者"].reduce(l),t.value["来訪者"].reduce(s)]});d.map(n=>n[0]).reduce(l);let u=0;const h=r()({colormap:"RdBu",nshades:30,format:"hex",alpha:1}),g=i.a.geoJSON(t,{style:{color:h[0],weight:.1,opacity:1,fillOpacity:.8}}).addTo(c);const m=i.a.control.emptyDiv({position:"bottomleft",className:"map-indicator"}).addTo(c),f=document.createElement("div");f.className="datetime",m.getContainer().appendChild(f);const y=document.createElement("input"),b=new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"short",timeZone:"Asia/Tokyo"});y.className="selector",y.type="range",y.min=0,y.max=a.length-1,m.getContainer().appendChild(y);let v;const x=n=>{Object(p.isUndefined)(n)?u+=1:u=n,(a.length<=u||u<0)&&(u=0),function(){const n=Date.parse(a[u]);f.innerHTML=b.format(n),m.value=u,y.value=u}(),g.setStyle(n=>{try{const t=n.id,[r,a]=d[o.findIndex(n=>n===t)],i=e[t],l=i.value["来訪者"][u%7],p=i.value["来訪者"][u];let c=parseInt((p-l)/r*(h.length-1)+h.length/2,10);return c=c<0?0:c,c=c>=h.length?h.length-1:c,{fillColor:h[c],opacity:1}}catch(n){console.error(n)}})};y.addEventListener("input",n=>{clearInterval(v),c.dragging.disable(),u=+n.target.value,x(u)}),y.addEventListener("change",()=>{v=setInterval(x,500),c.dragging.enable()}),v=setInterval(x,500)}).catch(console.error)}});